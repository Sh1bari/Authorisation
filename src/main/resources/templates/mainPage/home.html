<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/all.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<body>
<script type="text/javascript">
    function showAuthorisationFormLogin(){
        $.ajax({
            url: '/authorisationFormLogin',
            type: 'get',
            success: function(data) {
                var authorisationForm = document.getElementById("showAuthorisation")
                authorisationForm.innerHTML = data
            }
        });
        document.getElementById("changeAuthorisationBtn").setAttribute("onclick", "closeAuthorisationForm();")
    }

    function closeAuthorisationForm(){
        document.getElementById("changeAuthorisationBtn").setAttribute("onclick", "showAuthorisationFormLogin();")
        document.getElementById("showAuthorisation").innerHTML = ""
    }

    function add_user(){
        $.ajax({
            url:'/authorisation/user/add',
            dataType: 'json',
            type: 'POST',
            cache: false,
            contentType: 'application/json',
            data: JSON.stringify({
                login: $('#login').val(),
                password: $('#password').val()
            })
        })
        document.getElementById("login").value= "";
        document.getElementById("password").value= "";
    }
    function showAuthorisationFormSignup(){
        $.ajax({
            url: '/authorisationFormSignup',
            type: 'get',
            success: function(data) {
                var authorisationForm = document.getElementById("showAuthorisation")
                authorisationForm.innerHTML = data
            }
        });
    }
    function login_user(){
        $.ajax({
            url:'/authorisation/user/login',
            dataType: 'json',
            type: 'POST',
            cache: false,
            contentType: 'application/json',
            data: JSON.stringify({
                login: $('#login').val()
            }),
            success: function (data){
                if(data.exceptionName === "Неверный логин"){
                    document.getElementById("incorrectLogin").innerHTML = "Неверный логин"
                    document.getElementById("incorrectPassword").innerHTML = ""
                }else{
                    document.getElementById("incorrectLogin").innerHTML = ""
                    if (document.getElementById("password").value === data[0].password){
                        document.getElementById("incorrectPassword").innerHTML = ""
                    }else{
                        document.getElementById("incorrectPassword").innerHTML = "Неверный пароль"
                    }
                }
            }
        })
    }
</script>

<div class="container">
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
        <a href="#" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
            <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
            <span class="fs-4">MySite</span>
        </a>
        <ul class="nav nav-pills">
            <li class="nav-item"><a href="#" class="nav-link active" aria-current="page">Home</a></li>
            <li class="nav-item"><button onclick="showAuthorisationFormLogin();" id="changeAuthorisationBtn" class="nav-link">Authorisation</button></li>
            <!--        <li class="nav-item"><a href="#" class="nav-link">Pricing</a></li>-->
            <!--        <li class="nav-item"><a href="#" class="nav-link">FAQs</a></li>-->
            <!--        <li class="nav-item"><a href="#" class="nav-link">About</a></li>-->
        </ul>
    </header>
</div>
<div id="showAuthorisation" ></div>
</body>
</html>